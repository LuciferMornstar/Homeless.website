(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7084],{4614:function(e,t,s){Promise.resolve().then(s.bind(s,4767))},336:function(e,t,s){"use strict";var r=s(7437);s(2265),t.Z=e=>{let{size:t="md",color:s="primary",className:n="",text:l}=e;return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center ".concat(n),children:[(0,r.jsx)("div",{className:"animate-spin rounded-full ".concat({sm:"h-4 w-4 border-2",md:"h-8 w-8 border-2",lg:"h-12 w-12 border-3",xl:"h-16 w-16 border-4"}[t]," ").concat({primary:"border-red-700 border-t-transparent",secondary:"border-blue-600 border-t-transparent",gray:"border-gray-600 border-t-transparent"}[s]),role:"status","aria-label":"Loading",children:(0,r.jsx)("span",{className:"sr-only",children:"Loading..."})}),l&&(0,r.jsx)("p",{className:"mt-3 text-".concat("primary"===s?"red-700":"secondary"===s?"blue-600":"gray-600"),children:l})]})}},4767:function(e,t,s){"use strict";s.d(t,{default:function(){return i}});var r=s(7437),n=s(2265),l=s(5475),a=s(6385),o=s(336),i=e=>{let{userId:t}=e,[s,i]=(0,n.useState)([]),[c,d]=(0,n.useState)({}),[u,m]=(0,n.useState)(0),[h,b]=(0,n.useState)(!0),[x,g]=(0,n.useState)(null),[p,y]=(0,n.useState)(null),[f,j]=(0,n.useState)(!1),w=(0,l.useRouter)();(0,n.useEffect)(()=>{(async()=>{try{b(!0);let e=await a.Z.get("mental-health-questions");e.success&&e.data?i(e.data):g("Failed to load assessment questions. Please try again later.")}catch(e){g("An error occurred while loading the assessment. Please try again later."),console.error("Error fetching mental health questions:",e)}finally{b(!1)}})()},[]);let N=(e,t)=>{d({...c,[e]:t})},v=async()=>{try{b(!0);let e=Object.entries(c).map(e=>{let[t,s]=e;return{questionId:parseInt(t),answerValue:s}}),r=await a.Z.post("mental-health-assessment",{userId:t||null,answers:e});r.success&&r.data?(y({interpretation:r.data.interpretation,recommendations:r.data.recommendations,severity:r.data.severity}),m(s.length+1)):g("Failed to submit assessment. Please try again later.")}catch(e){g("An error occurred while submitting the assessment. Please try again later."),console.error("Error submitting mental health assessment:",e)}finally{b(!1)}},k=()=>{d({}),m(0),y(null),g(null)},D=u<s.length?s[u]:null,S=()=>{j(!f)};if(h&&0===s.length)return(0,r.jsx)(o.Z,{});if(x)return(0,r.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,r.jsx)("h2",{className:"text-xl text-red-800 mb-2",children:"Error"}),(0,r.jsx)("p",{className:"text-red-700",children:x}),(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700",children:"Try Again"})]});if(0===u)return(0,r.jsxs)("div",{className:"max-w-3xl mx-auto bg-white p-6 rounded-lg shadow-md",children:[(0,r.jsx)("div",{className:"flex justify-end mb-4",children:(0,r.jsx)("button",{onClick:S,className:"text-sm bg-blue-50 text-blue-700 py-1 px-3 rounded border border-blue-300",children:f?"Switch to Detailed View":"Switch to Simple View"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-center mb-6",children:"Mental Health Check-In"}),f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"text-lg mb-6",children:[(0,r.jsx)("p",{className:"mb-4",children:"This is a simple check to see how you are feeling."}),(0,r.jsx)("p",{className:"mb-4",children:"Your answers can help us find ways to support you."}),(0,r.jsx)("p",{className:"mb-4",children:"This will take about 5 minutes."}),(0,r.jsx)("p",{className:"mb-4",children:"You can stop at any time."})]}),(0,r.jsxs)("ul",{className:"list-disc pl-6 mb-6 text-lg",children:[(0,r.jsxs)("li",{children:["There are ",s.length," questions"]}),(0,r.jsx)("li",{children:"Pick the answer that fits best for you"}),(0,r.jsx)("li",{children:"This is private"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"text-gray-700 mb-6",children:[(0,r.jsx)("p",{className:"mb-4",children:"Welcome to our mental health assessment. This confidential questionnaire is designed to help you understand your current mental wellbeing and identify potential areas where support might be beneficial."}),(0,r.jsxs)("p",{className:"mb-4",children:["Your responses will help us provide tailored recommendations for resources that may be useful to you. This assessment takes approximately 5 minutes to complete and consists of ",s.length," questions about how you've been feeling recently."]}),(0,r.jsx)("p",{className:"mb-4",children:"Please note that this is not a diagnostic tool, but rather a way to help guide you toward appropriate support based on your current experiences. All information provided is confidential."})]}),(0,r.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[(0,r.jsx)("h3",{className:"font-semibold text-blue-800 mb-2",children:"Before you begin:"}),(0,r.jsxs)("ul",{className:"list-disc pl-6 text-blue-700",children:[(0,r.jsx)("li",{children:"Try to answer as honestly as possible"}),(0,r.jsx)("li",{children:"Consider how you've been feeling over the past two weeks"}),(0,r.jsx)("li",{children:"You can stop at any time and return later"}),(0,r.jsx)("li",{children:"Your responses are confidential"})]})]})]}),(0,r.jsx)("div",{className:"mt-8 flex justify-center",children:(0,r.jsx)("button",{onClick:()=>m(1),className:"bg-blue-600 text-white py-3 px-8 rounded-lg text-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Start Assessment"})}),(0,r.jsx)("div",{className:"mt-6 text-center text-gray-500 text-sm",children:(0,r.jsx)("p",{children:"If you're in crisis and need immediate help, please call 999 or the Samaritans at 116 123"})})]});if(p)return(0,r.jsxs)("div",{className:"max-w-3xl mx-auto bg-white p-6 rounded-lg shadow-md",children:[(0,r.jsx)("div",{className:"flex justify-end mb-4",children:(0,r.jsx)("button",{onClick:S,className:"text-sm bg-blue-50 text-blue-700 py-1 px-3 rounded border border-blue-300",children:f?"Switch to Detailed View":"Switch to Simple View"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-center mb-6",children:"Your Assessment Results"}),f?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"How You Are Feeling:"}),(0,r.jsx)("p",{className:"text-lg mb-4",children:p.interpretation.split("\n\n")[0]}),(0,r.jsx)("h2",{className:"text-xl font-semibold mt-6 mb-4",children:"Things That Might Help:"}),(0,r.jsx)("p",{className:"text-lg mb-4",children:p.recommendations}),(0,r.jsx)("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200 mt-6",children:(0,r.jsx)("p",{className:"text-lg",children:"This check-in is not the same as seeing a doctor. It just gives you ideas about how you're feeling."})})]})}):(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"Assessment Interpretation"}),(0,r.jsx)("p",{className:"text-gray-700 mb-6 leading-relaxed",children:p.interpretation}),(0,r.jsx)("h2",{className:"text-xl font-semibold mb-3 mt-8",children:"Recommendations"}),(0,r.jsx)("p",{className:"text-gray-700 mb-6 leading-relaxed",children:p.recommendations}),(0,r.jsxs)("div",{className:"bg-blue-50 p-5 rounded-lg mt-8",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"Next Steps"}),(0,r.jsx)("p",{className:"text-blue-700 mb-4",children:"Based on your responses, we've compiled a list of resources that may be helpful to you. These include local support services, self-help strategies, and professional care options."}),(0,r.jsx)("button",{onClick:()=>w.push("/mental-health"),className:"bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700",children:"View Recommended Resources"})]})]})}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-center gap-4 mt-8",children:[(0,r.jsx)("button",{onClick:k,className:"bg-gray-200 text-gray-800 py-2 px-6 rounded hover:bg-gray-300",children:"Take Again"}),(0,r.jsx)("button",{onClick:()=>w.push("/mental-health"),className:"bg-blue-600 text-white py-2 px-6 rounded hover:bg-blue-700",children:"Find Support"}),t&&(0,r.jsx)("button",{onClick:()=>w.push("/profile"),className:"bg-green-600 text-white py-2 px-6 rounded hover:bg-green-700",children:"Save to Profile"})]}),(0,r.jsxs)("div",{className:"mt-8 text-center",children:[(0,r.jsx)("p",{className:"font-semibold",children:"Need immediate help?"}),(0,r.jsx)("p",{className:"text-gray-700",children:"Call the Samaritans: 116 123 (free, 24/7)"}),(0,r.jsx)("p",{className:"text-gray-700",children:"Text SHOUT to 85258 (free, 24/7)"}),(0,r.jsx)("p",{className:"text-gray-700",children:"For emergencies, call 999"})]})]});if(D){let e=s.length,t=u/e*100;return(0,r.jsxs)("div",{className:"max-w-3xl mx-auto bg-white p-6 rounded-lg shadow-md",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("span",{className:"text-gray-600",children:["Question ",u," of ",e]}),(0,r.jsx)("button",{onClick:S,className:"text-sm bg-blue-50 text-blue-700 py-1 px-3 rounded border border-blue-300",children:f?"Switch to Detailed View":"Switch to Simple View"})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mb-6",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:"".concat(t,"%")}})}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h2",{className:f?"text-xl font-semibold mb-4":"text-lg font-medium mb-4",children:D.QuestionText}),(0,r.jsx)("div",{className:"space-y-3 mt-6",children:f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{onClick:()=>N(D.QuestionID,0),className:"w-full text-left p-4 rounded-lg border ".concat(0===c[D.QuestionID]?"bg-green-100 border-green-400":"border-gray-300 hover:bg-gray-50"),children:[(0,r.jsx)("span",{className:"text-2xl mr-3",children:"\uD83D\uDE0A"})," Not at all"]}),(0,r.jsxs)("button",{onClick:()=>N(D.QuestionID,1),className:"w-full text-left p-4 rounded-lg border ".concat(1===c[D.QuestionID]?"bg-green-100 border-green-400":"border-gray-300 hover:bg-gray-50"),children:[(0,r.jsx)("span",{className:"text-2xl mr-3",children:"\uD83D\uDE42"})," A little bit"]}),(0,r.jsxs)("button",{onClick:()=>N(D.QuestionID,2),className:"w-full text-left p-4 rounded-lg border ".concat(2===c[D.QuestionID]?"bg-yellow-100 border-yellow-400":"border-gray-300 hover:bg-gray-50"),children:[(0,r.jsx)("span",{className:"text-2xl mr-3",children:"\uD83D\uDE10"})," Sometimes"]}),(0,r.jsxs)("button",{onClick:()=>N(D.QuestionID,3),className:"w-full text-left p-4 rounded-lg border ".concat(3===c[D.QuestionID]?"bg-orange-100 border-orange-400":"border-gray-300 hover:bg-gray-50"),children:[(0,r.jsx)("span",{className:"text-2xl mr-3",children:"\uD83D\uDE1F"})," Most of the time"]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>N(D.QuestionID,0),className:"w-full text-left p-3 rounded-lg border ".concat(0===c[D.QuestionID]?"bg-green-50 border-green-300":"border-gray-300 hover:bg-gray-50"),children:"Not at all - I haven't experienced this"}),(0,r.jsx)("button",{onClick:()=>N(D.QuestionID,1),className:"w-full text-left p-3 rounded-lg border ".concat(1===c[D.QuestionID]?"bg-green-50 border-green-300":"border-gray-300 hover:bg-gray-50"),children:"Several days - Occasionally but not persistently"}),(0,r.jsx)("button",{onClick:()=>N(D.QuestionID,2),className:"w-full text-left p-3 rounded-lg border ".concat(2===c[D.QuestionID]?"bg-yellow-50 border-yellow-300":"border-gray-300 hover:bg-gray-50"),children:"More than half the days - Frequently and notably"}),(0,r.jsx)("button",{onClick:()=>N(D.QuestionID,3),className:"w-full text-left p-3 rounded-lg border ".concat(3===c[D.QuestionID]?"bg-orange-50 border-orange-300":"border-gray-300 hover:bg-gray-50"),children:"Nearly every day - Consistently and significantly"})]})})]}),(0,r.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,r.jsx)("button",{onClick:()=>{u>0&&(m(u-1),window.scrollTo(0,0))},disabled:1===u,className:"py-2 px-5 rounded ".concat(1===u?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-800 hover:bg-gray-300"),children:"Previous"}),u<e?(0,r.jsx)("button",{onClick:()=>{if(D&&!c[D.QuestionID]){alert("Please select an answer before continuing.");return}u<s.length&&(m(u+1),window.scrollTo(0,0))},disabled:void 0===c[D.QuestionID],className:"py-2 px-5 rounded ".concat(void 0===c[D.QuestionID]?"bg-blue-300 text-white cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:"Next"}):(0,r.jsx)("button",{onClick:v,disabled:void 0===c[D.QuestionID],className:"py-2 px-5 rounded ".concat(void 0===c[D.QuestionID]?"bg-green-300 text-white cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"),children:"Submit"})]}),(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsx)("button",{onClick:k,className:"text-blue-600 hover:underline",children:"Cancel and start over"})})]})}return null}},6385:function(e,t){"use strict";t.Z={async get(e,t){try{let s="/api/".concat(e);if(t){let e=new URLSearchParams;Object.entries(t).forEach(t=>{let[s,r]=t;e.append(s,String(r))}),s+="?".concat(e.toString())}let r=await fetch(s),n=await r.json();if(n.success)return{success:!0,data:n.data};return{success:!1,error:n.error||"Unknown error"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error occurred"}}},async post(e,t){try{let s=await fetch("/api/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await s.json();if(r.success)return{success:!0,data:r.data};return{success:!1,error:r.error||"Unknown error"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error occurred"}}}}}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=4614)}),_N_E=e.O()}]);