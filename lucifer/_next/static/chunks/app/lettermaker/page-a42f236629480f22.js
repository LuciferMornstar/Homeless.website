(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[648],{9543:function(e,r,s){Promise.resolve().then(s.t.bind(s,2972,23)),Promise.resolve().then(s.bind(s,7068))},7068:function(e,r,s){"use strict";var t=s(7437),l=s(2265),a=s(1268),n=s(5217),o=s(6385);r.default=e=>{let{userId:r}=e,[s,c]=(0,l.useState)([]),[i,d]=(0,l.useState)(null),[u,h]=(0,l.useState)(""),[m,g]=(0,l.useState)(""),[p,x]=(0,l.useState)(""),[f,b]=(0,l.useState)(""),[j,y]=(0,l.useState)(""),[v,N]=(0,l.useState)(!0),[w,S]=(0,l.useState)(!1),[E,k]=(0,l.useState)(null),[C,D]=(0,l.useState)(null),[T,L]=(0,l.useState)("housing");(0,l.useEffect)(()=>{I()},[T]);let I=async()=>{try{N(!0);let e=await o.Z.get("lettermaker",{type:T});if(e.success&&Array.isArray(e.data))c(e.data),e.data.length>0&&(d(e.data[0]),x(e.data[0].TemplateContent));else throw Error("Failed to fetch letter templates")}catch(e){console.error("Error fetching letter templates:",e),k("Failed to load letter templates. Please try again later.")}finally{N(!1)}},A=()=>i?p.replace(/\[RECIPIENT_NAME\]/g,u).replace(/\[RECIPIENT_ADDRESS\]/g,m).replace(/\[YOUR_NAME\]/g,f).replace(/\[YOUR_ADDRESS\]/g,j).replace(/\[DATE\]/g,new Date().toLocaleDateString("en-GB")).replace(/\[TODAY\]/g,new Date().toLocaleDateString("en-GB")):"",F=async()=>{try{S(!0),k(null),D(null);let e=A(),s=await o.Z.post("lettermaker",{userId:r,letterType:(null==i?void 0:i.TemplateType)||T,letterContent:e,recipientName:u,recipientAddress:m});if(s.success)D("Your letter has been saved successfully!");else throw Error(s.message||"Failed to save letter")}catch(e){console.error("Error saving letter:",e),k("Failed to save letter. Please try again later.")}finally{S(!1)}};return v?(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)(a.G,{icon:n.LM3,spin:!0,size:"2x",className:"text-red-700"})}):(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-800",children:"Letter Maker"}),E&&(0,t.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:(0,t.jsx)("p",{children:E})}),C&&(0,t.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:(0,t.jsx)("p",{children:C})}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Letter Information"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700 mb-2",children:"Letter Type"}),(0,t.jsxs)("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-red-500",value:T,onChange:e=>{L(e.target.value)},children:[(0,t.jsx)("option",{value:"housing",children:"Housing & Accommodation"}),(0,t.jsx)("option",{value:"benefits",children:"Benefits & Financial Support"}),(0,t.jsx)("option",{value:"healthcare",children:"Healthcare Access"}),(0,t.jsx)("option",{value:"employment",children:"Employment"}),(0,t.jsx)("option",{value:"legal",children:"Legal Services"}),(0,t.jsx)("option",{value:"complaint",children:"Complaints & Grievances"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700 mb-2",children:"Letter Template"}),(0,t.jsx)("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-red-500",value:(null==i?void 0:i.TemplateID)||"",onChange:e=>{let r=parseInt(e.target.value),t=s.find(e=>e.TemplateID===r)||null;d(t),t&&x(t.TemplateContent)},disabled:0===s.length,children:0===s.length?(0,t.jsx)("option",{value:"",children:"No templates available"}):s.map(e=>(0,t.jsx)("option",{value:e.TemplateID,children:e.TemplateName},e.TemplateID))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700 mb-2",children:"Your Name"}),(0,t.jsx)("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-red-500",value:f,onChange:e=>b(e.target.value),placeholder:"Enter your full name"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700 mb-2",children:"Your Address"}),(0,t.jsx)("textarea",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-red-500",value:j,onChange:e=>y(e.target.value),placeholder:"Enter your address",rows:3})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700 mb-2",children:"Recipient Name"}),(0,t.jsx)("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-red-500",value:u,onChange:e=>h(e.target.value),placeholder:"Who is this letter addressed to?"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700 mb-2",children:"Recipient Address"}),(0,t.jsx)("textarea",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-red-500",value:m,onChange:e=>g(e.target.value),placeholder:"Enter recipient's address",rows:3})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-gray-700 mb-2",children:"Letter Content"}),(0,t.jsx)("textarea",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-red-500",value:p,onChange:e=>{x(e.target.value)},placeholder:"Enter or edit the letter content",rows:10})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Letter Preview"}),(0,t.jsxs)("div",{className:"bg-white p-6 border border-gray-300 rounded-lg shadow-sm min-h-[60vh] max-h-[70vh] overflow-y-auto font-serif",children:[(0,t.jsxs)("div",{className:"text-right mb-8",children:[(0,t.jsx)("p",{children:f}),(0,t.jsx)("p",{children:j}),(0,t.jsx)("p",{children:new Date().toLocaleDateString("en-GB")})]}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("p",{children:u}),(0,t.jsx)("p",{children:m})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{children:["Dear ",u||"[Recipient]",","]}),(0,t.jsx)("div",{className:"mt-4 whitespace-pre-line",children:p}),(0,t.jsxs)("div",{className:"mt-8",children:[(0,t.jsx)("p",{children:"Yours sincerely,"}),(0,t.jsx)("p",{className:"mt-6",children:f||"[Your Name]"})]})]})]}),(0,t.jsxs)("div",{className:"mt-6 flex flex-wrap gap-3",children:[(0,t.jsxs)("button",{onClick:()=>{i&&x(i.TemplateContent),D(null),k(null)},className:"flex items-center px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500",children:[(0,t.jsx)(a.G,{icon:n.X7o,className:"mr-2"})," Reset"]}),(0,t.jsx)("button",{onClick:F,disabled:w,className:"flex items-center px-4 py-2 ".concat(w?"bg-gray-400 cursor-not-allowed":"bg-red-700 hover:bg-red-800"," text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"),children:w?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.G,{icon:n.LM3,spin:!0,className:"mr-2"})," Saving..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.G,{icon:n.r6l,className:"mr-2"})," Save Letter"]})}),(0,t.jsxs)("button",{onClick:()=>{alert("PDF download feature coming soon. For now, you can copy the letter content and paste it into a word processor.")},className:"flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)(a.G,{icon:n.gSj,className:"mr-2"})," Download PDF"]}),(0,t.jsxs)("button",{onClick:()=>{alert("Word document download feature coming soon. For now, you can copy the letter content and paste it into a word processor.")},className:"flex items-center px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[(0,t.jsx)(a.G,{icon:n.Mfv,className:"mr-2"})," Download Word"]})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg shadow-md p-6 mb-8",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Letter Writing Tips"}),(0,t.jsxs)("ul",{className:"list-disc pl-5 space-y-2",children:[(0,t.jsx)("li",{children:"Keep your letter concise and to the point."}),(0,t.jsx)("li",{children:"Clearly state what you're requesting in the first paragraph."}),(0,t.jsx)("li",{children:"Include any reference numbers or relevant dates."}),(0,t.jsx)("li",{children:"Be polite and professional, even if you're frustrated."}),(0,t.jsx)("li",{children:"Keep a copy of all correspondence for your records."}),(0,t.jsx)("li",{children:"If possible, follow up with a phone call a week after sending."})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg shadow-md p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Need Help?"}),(0,t.jsx)("p",{className:"mb-4",children:"If you need assistance with your letter or have questions about your specific situation, please contact our support team:"}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(a.G,{icon:n.FU$,className:"text-red-700 mr-2"}),(0,t.jsx)("a",{href:"mailto:helpme@homeless.website",className:"text-red-700 hover:underline",children:"helpme@homeless.website"})]})]})]})}},6385:function(e,r){"use strict";r.Z={async get(e,r){try{let s="/api/".concat(e);if(r){let e=new URLSearchParams;Object.entries(r).forEach(r=>{let[s,t]=r;e.append(s,String(t))}),s+="?".concat(e.toString())}let t=await fetch(s),l=await t.json();if(l.success)return{success:!0,data:l.data};return{success:!1,error:l.error||"Unknown error"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error occurred"}}},async post(e,r){try{let s=await fetch("/api/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),t=await s.json();if(t.success)return{success:!0,data:t.data};return{success:!1,error:t.error||"Unknown error"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error occurred"}}}}}},function(e){e.O(0,[3676,2972,1268,2971,2117,1744],function(){return e(e.s=9543)}),_N_E=e.O()}]);