<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Letter Maker - Hopeful Horizons</title>
    <!-- Modern Styling -->
    <link rel="stylesheet" href="assets/css/modern/wix-modern.css">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chelsea+Market&family=Caveat+Brush&display=swap" rel="stylesheet">
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Favicon -->
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="assets/css/monkey-island-style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="js/menuModule.js"></script>
</head>
<body class="bg-light">
    <!-- Modern Header -->
    <header class="modern-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="index.html"><img src="logo.png" alt="Homeless Helpers"></a>
                </div>
                <button class="menu-toggle"><i class="fas fa-bars"></i></button>
                <nav class="modern-nav">
                    <ul class="nav-list">
                        <li class="nav-item"><a href="index.html" class="nav-link">Home</a></li>
                        <li class="nav-item dropdown"><a href="#" class="nav-link">Get Help</a>
                            <div class="dropdown-content">
                                <a href="shelters.html" class="dropdown-item">Find Shelters</a>
                                <a href="foodbanks.html" class="dropdown-item">Food Banks</a>
                                <a href="healthcare.html" class="dropdown-item">Healthcare</a>
                                <a href="employment.html" class="dropdown-item">Employment</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown"><a href="#" class="nav-link">Resources</a>
                            <div class="dropdown-content">
                                <a href="resources.html" class="dropdown-item">All Resources</a>
                                <a href="lettermaker.html" class="dropdown-item">Letter Maker</a>
                                <a href="verify-assistance-dog.html" class="dropdown-item">Assistance Dogs</a>
                            </div>
                        </li>
                        <li class="nav-item"><a href="network.html" class="nav-link">Network</a></li>
                        <li class="nav-item"><a href="volunteer.html" class="nav-link">Volunteer</a></li>
                        <li class="nav-item"><a href="about.html" class="nav-link">About</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>
    
    <main class="container mx-auto px-4 py-8 mt-20">
        <h1 class="text-4xl text-center mb-8 text-[#48d595]">Homelessness Assistance Letter Generator</h1>
        
        <div class="text-card mb-8">
            <h2 class="text-2xl mb-4">Create a Custom Letter for Your Situation</h2>
            <p class="mb-4">
                Use this tool to generate a professional letter to help you communicate with councils, housing authorities, 
                and other organizations. These templates can help you assert your rights and request assistance.
            </p>
            <div class="bg-[#1d1c1a] border-l-4 border-[#48d595] p-4 mt-6">
                <p class="font-bold text-[#48d595]">Important Disclaimer</p>
                <p>These are basic templates based on general rights. Always review generated letters carefully, 
                add specific details relevant to your case, attach all necessary evidence, and seek advice from 
                organisations like Shelter, Citizens Advice, or a solicitor before sending.</p>
            </div>
        </div>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div class="text-card">
                <h2 class="text-2xl mb-6 text-[#48d595]">Your Information</h2>
                
                <form id="homelessnessForm">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="form-group">
                            <label for="fullName">Full Name:</label>
                            <input type="text" id="fullName" name="fullName" required placeholder="Your full name">
                        </div>
                        <div class="form-group">
                            <label for="dob">Date of Birth:</label>
                            <input type="date" id="dob" name="dob">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="address">Current Address (or 'No Fixed Abode'):</label>
                        <input type="text" id="address" name="address" required placeholder="Where you currently stay or 'No Fixed Abode'">
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="form-group">
                            <label for="phone">Phone Number:</label>
                            <input type="text" id="phone" name="phone" placeholder="Your contact number">
                        </div>
                        <div class="form-group">
                            <label for="email">Email Address:</label>
                            <input type="text" id="email" name="email" placeholder="Your email address">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="councilName">Local Council Name:</label>
                        <input type="text" id="councilName" name="councilName" required placeholder="Start typing council name..." list="council-list">
                        <datalist id="council-list">
                            <!-- Metropolitan districts -->
                            <option value="Birmingham City Council"></option>
                            <option value="Manchester City Council"></option>
                            <option value="Leeds City Council"></option>
                            <option value="Liverpool City Council"></option>
                            <!-- London boroughs -->
                            <option value="Camden Council"></option>
                            <option value="Westminster City Council"></option>
                            <option value="Hackney Council"></option>
                            <option value="Southwark Council"></option>
                            <!-- More councils will be added via JavaScript -->
                        </datalist>
                    </div>
                    
                    <!-- Template selection section with improved structure -->
                    <div class="form-group">
                        <label for="letterType">Type of Letter:</label>
                        <select id="letterType" name="letterType" class="w-full input-field" required multiple size="6">
                            <option value="homeless-application">Homeless Application</option>
                            <option value="emergency-accommodation">Emergency Accommodation</option>
                            <option value="housing-assistance">Housing Assistance Request</option>
                            <option value="emergency-shelter">Emergency Shelter Request</option>
                            <option value="reasonable-accommodation">Reasonable Accommodation Request</option>
                            <option value="rental-application">Rental Application Support</option>
                            <option value="landlord-negotiation">Landlord Negotiation</option>
                            <option value="rental-assistance">Rental Assistance Application</option>
                            <option value="eviction-prevention">Eviction Prevention</option>
                            <option value="utility-assistance">Utility Assistance</option>
                            <option value="social-services">Social Services Appeal</option>
                            <option value="document-replacement">Document Replacement</option>
                            <option value="employment-reference">Employment Reference Request</option>
                            <option value="healthcare-access">Healthcare Access Request</option>
                            <option value="benefits-appeal">Benefits Appeal Letter</option>
                            <option value="shelter-referral">Shelter Referral Request</option>
                            <option value="domestic-violence">Domestic Violence Housing Request</option>
                        </select>
                        <small>(Hold Ctrl/Cmd to select multiple)</small>
                    </div>

                    <!-- Preview section for the selected template -->
                    <div class="form-group">
                        <div id="templatePreview" class="template-preview">
                            <h4>Template Preview</h4>
                            <p>Select a letter type to see a preview of the template.</p>
                        </div>
                    </div>

                    <!-- Template variant selection -->
                    <div class="form-group">
                        <label for="templateVariant">Template Variant:</label>
                        <select id="templateVariant" name="templateVariant" class="w-full input-field">
                            <option value="standard" selected>Standard Format</option>
                            <option value="detailed">Detailed Format</option>
                            <option value="concise">Concise Format</option>
                            <option value="formal">Formal Tone</option>
                            <option value="assertive">Assertive Tone</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="recipientName">Recipient Name/Organization:</label>
                        <input type="text" id="recipientName" name="recipientName" class="clickable" placeholder="Name of person or organization receiving the letter">
                    </div>

                    <div class="form-group">
                        <label for="recipientAddress">Recipient Address:</label>
                        <textarea id="recipientAddress" name="recipientAddress" class="clickable" placeholder="Full address of recipient"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="urgencyLevel">Urgency Level:</label>
                        <select id="urgencyLevel" name="urgencyLevel" class="clickable">
                            <option value="standard">Standard</option>
                            <option value="urgent">Urgent</option>
                            <option value="emergency">Emergency</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="specificNeeds">Specific Needs:</label>
                        <textarea id="specificNeeds" name="specificNeeds" class="clickable" placeholder="Describe any specific accommodations or needs"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="supportingDocuments">Supporting Documents (Optional):</label>
                        <select id="supportingDocuments" name="supportingDocuments" class="clickable" multiple>
                            <option value="medical">Medical Documentation</option>
                            <option value="financial">Financial Statements</option>
                            <option value="identification">Identification Documents</option>
                            <option value="housing">Previous Housing Records</option>
                            <option value="legal">Legal Documents</option>
                        </select>
                        <small>Hold Ctrl/Cmd to select multiple options</small>
                    </div>

                    <div class="form-group">
                        <label for="userPhone">Phone Number (optional):</label>
                        <input type="tel" id="userPhone" name="userPhone" class="clickable">
                    </div>

                    <div class="form-group">
                        <label for="userReference">Reference Number (if applicable):</label>
                        <input type="text" id="userReference" name="userReference" class="clickable">
                    </div>

                    <div class="form-group">
                        <label for="specialCircumstances">Special Circumstances:</label>
                        <select id="specialCircumstances" name="specialCircumstances" multiple class="clickable">
                            <option value="disability">Disability</option>
                            <option value="mental-health">Mental Health Issues</option>
                            <option value="domestic-violence">Domestic Violence</option>
                            <option value="children">Dependent Children</option>
                            <option value="pregnancy">Pregnancy</option>
                            <option value="elderly">Elderly</option>
                            <option value="veteran">Veteran</option>
                        </select>
                        <small>(Hold Ctrl/Cmd to select multiple)</small>
                    </div>

                    <div class="form-group">
                        <label for="circumstances">Your Circumstances (Optional):</label>
                        <textarea id="circumstances" name="circumstances" rows="4" placeholder="Describe your current situation, any health issues, dependents, or other relevant details that should be included in your letter"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="supportingInfo">Additional Supporting Information:</label>
                        <textarea id="supportingInfo" name="supportingInfo" rows="3" placeholder="List any evidence you're attaching (e.g., medical letters, eviction notice)"></textarea>
                    </div>
                    
                    <button type="submit" id="generateButton" class="nav-button clickable w-full">
                        Generate Letter
                    </button>
                </form>
            </div>
            
            <div class="text-card">
                <h2 class="text-2xl mb-6 text-[#48d595]">Your Generated Letter</h2>
                <div id="letterOutput" class="min-h-[500px] text-white">
                    Your letter will appear here after you submit the form.
                </div>
                <div class="flex justify-between mt-6">
                    <button id="copyButton" class="nav-button clickable" disabled>Copy to Clipboard</button>
                    <button id="printButton" class="nav-button clickable" disabled>Print Letter</button>
                    <button id="downloadButton" class="nav-button clickable" disabled>Download as PDF</button>
                </div>
                <div class="button-container">
                    <button id="saveLetterBtn" class="btn" disabled>Save Letter</button>
                </div>
            </div>
        </div>
        
        <div class="text-center mb-10 mt-12">
            <h2 class="text-3xl mb-6 text-[#48d595]">Other Helpful Resources</h2>
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
                <button onclick="location.href='get-help.html'" class="nav-button clickable">Get Help</button>
                <button onclick="location.href='foodbanks.html'" class="nav-button clickable">Food Banks</button>
                <button onclick="location.href='employment.html'" class="nav-button clickable">Employment</button>
                <button onclick="location.href='healthcare.html'" class="nav-button clickable">Healthcare</button>
                <button onclick="location.href='emergency.html'" class="nav-button clickable">Emergency</button>
                <button onclick="location.href='volunteer.html'" class="nav-button clickable">Volunteer</button>
                <button onclick="location.href='network.html'" class="nav-button clickable">Support Network</button>
            </div>
        </div>
    </main>

    <!-- Message box for notifications -->
    <div id="messageBox" class="message-box">
        <span id="messageText"></span>
    </div>

    <!-- Modern Footer -->
    <footer class="modern-footer">
        <div class="container">
            <div class="row">
                <div class="col-4">
                    <div class="footer-logo"><img src="logo.png" alt="Homeless Helpers" height="40"></div>
                    <p>Providing support, resources and hope to those facing homelessness.</p>
                    <div class="social-links">
                        <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
                <div class="col-4">
                    <h4>Quick Links</h4>
                    <ul class="footer-nav">
                        <li class="footer-nav-item"><a href="shelters.html" class="footer-nav-link">Find Shelters</a></li>
                        <li class="footer-nav-item"><a href="foodbanks.html" class="footer-nav-link">Food Banks</a></li>
                        <li class="footer-nav-item"><a href="healthcare.html" class="footer-nav-link">Healthcare</a></li>
                        <li class="footer-nav-item"><a href="employment.html" class="footer-nav-link">Employment</a></li>
                        <li class="footer-nav-item"><a href="resources.html" class="footer-nav-link">Resources</a></li>
                    </ul>
                </div>
                <div class="col-4">
                    <h4>Contact Us</h4>
                    <ul class="footer-nav">
                        <li class="footer-nav-item"><i class="fas fa-envelope"></i> help@homelesshelpers.org</li>
                        <li class="footer-nav-item"><i class="fas fa-phone"></i> Emergency: 0800-555-HELP</li>
                        <li class="footer-nav-item"><i class="fas fa-map-marker-alt"></i> We're online 24/7</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom"><p>&copy; 2025 Homeless Helpers. All rights reserved. | <a href="siteindex.html">Site Index</a> | <a href="#">Privacy Policy</a></p></div>
        </div>
    </footer>
    
    <!-- Modern UI JavaScript -->
    <script src="assets/js/modern-ui.js"></script>
    <script>
        // Load full council list
        loadCouncilList();
        
        // Set up form submission
        const form = document.getElementById('homelessnessForm');
        form.addEventListener('submit', handleFormSubmit);
        
        // Set up copy button
        const copyButton = document.getElementById('copyButton');
        copyButton.addEventListener('click', copyToClipboard);
        
        // Set up print button
        const printButton = document.getElementById('printButton');
        printButton.addEventListener('click', printLetter);
        
        // Set up download button
        const downloadButton = document.getElementById('downloadButton');
        downloadButton.addEventListener('click', downloadAsPDF);
        
        // Set up save letter button
        const saveLetterBtn = document.getElementById('saveLetterBtn');
        saveLetterBtn.addEventListener('click', saveLetterToFile);
        
        // Set up letter type change listener
        const letterType = document.getElementById('letterType');
        letterType.addEventListener('change', updateFormFields);
        letterType.addEventListener('change', updateTemplatePreview);
        
        // Initialize the template preview
        updateTemplatePreview();
        
        // Load the complete list of councils
        function loadCouncilList() {
            // This function would normally fetch from an API, but for now we'll just add common ones
            const councilList = document.getElementById('council-list');
            const commonCouncils = [
                "Bristol City Council", "Newcastle City Council", "Cardiff Council", 
                "Edinburgh Council", "Glasgow City Council", "Aberdeen City Council",
                "Belfast City Council", "Leicester City Council", "Nottingham City Council",
                "Sheffield City Council", "Hull City Council", "Plymouth City Council"
            ];
            
            commonCouncils.forEach(council => {
                const option = document.createElement('option');
                option.value = council;
                councilList.appendChild(option);
            });
        }
        
        // Handle form submission
        function handleFormSubmit(event) {
            event.preventDefault();
            
            // Validate the form
            if (!validateForm()) return;
            
            // Show loading indicator
            showMessage("Generating your letter...", "info");
            
            // Generate letter with slight delay to show animation
            setTimeout(() => {
                generateLetter();
            }, 1000);
        }
        
        // Validate form fields
        function validateForm() {
            const required = ['fullName', 'address', 'councilName', 'letterType'];
            let isValid = true;
            
            // Clear previous validation
            document.querySelectorAll('.invalid').forEach(field => {
                field.classList.remove('invalid');
            });
            
            // Check required fields
            required.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (!field.value.trim()) {
                    field.classList.add('invalid');
                    isValid = false;
                }
            });
            
            if (!isValid) {
                showMessage("Please complete all required fields", "error");
            }
            
            return isValid;
        }
        
        // Update form fields based on selected letter type
        function updateFormFields() {
            const letterType = document.getElementById('letterType').value;
            const circumstancesField = document.getElementById('circumstances');
            
            // Update placeholder based on letter type
            switch (letterType) {
                case 'homeless-application':
                    circumstancesField.placeholder = "Describe why you're homeless or at risk, any health issues, dependents, etc.";
                    break;
                case 'emergency-accommodation':
                    circumstancesField.placeholder = "Explain your urgent housing need, any vulnerabilities, children, health conditions, etc.";
                    break;
                case 'housing-benefit':
                    circumstancesField.placeholder = "Describe your income situation, housing costs, and why you need assistance";
                    break;
                case 'complaint':
                    circumstancesField.placeholder = "Detail what happened, when, who was involved, and what resolution you seek";
                    break;
                case 'review-request':
                    circumstancesField.placeholder = "Explain why you think the housing decision was wrong and any new information";
                    break;
                case 'support-request':
                    circumstancesField.placeholder = "Describe what support you need and why (mental health, substance misuse, etc.)";
                    break;
                default:
                    circumstancesField.placeholder = "Describe your current situation, any health issues, dependents, or other relevant details";
            }
            
            // Call the preview function when form fields are updated
            updateTemplatePreview();
        }
        
        // Update template preview based on selected letter type
        function updateTemplatePreview() {
            const templateType = document.getElementById('letterType').value;
            const previewElement = document.getElementById('templatePreview');
            
            if (!previewElement) return;
            
            let title = 'Template Information';
            let description = '';
            
            switch (templateType) {
                case 'homeless-application':
                    title = 'Homeless Application';
                    description = 'This formal application notifies the council of your homelessness situation under the Housing Act 1996. It triggers their legal duty to assess your situation and provide a personalized housing plan. Best used when you first become homeless or are at risk.';
                    break;
                case 'emergency-accommodation':
                    title = 'Emergency Accommodation Request';
                    description = 'URGENT request when you have nowhere safe to stay tonight. Details your immediate need for temporary housing and any vulnerabilities that make your situation particularly urgent. Use this when you need shelter immediately.';
                    break;
                case 'housing-assistance':
                    title = 'Housing Assistance Request';
                    description = 'General request for housing support options. This letter asks what help is available for your specific situation and requests guidance on housing programs, financial assistance, or other support services you might qualify for.';
                    break;
                case 'emergency-shelter':
                    title = 'Emergency Shelter Request';
                    description = 'URGENT request for immediate shelter placement. Use when you need same-day access to a shelter bed or other emergency accommodation due to having no safe place to stay.';
                    break;
                case 'reasonable-accommodation':
                    title = 'Reasonable Accommodation Request';
                    description = 'Request for disability-related housing accommodations under the Equality Act 2010. This letter helps you formally request specific modifications to housing policies or physical adaptations needed because of your disability.';
                    break;
                case 'rental-application':
                    title = 'Rental Application Support';
                    description = 'A supportive letter to accompany private rental applications when you face barriers like poor credit history, past evictions, or limited rental history. Explains your circumstances and commitment to being a good tenant.';
                    break;
                case 'landlord-negotiation':
                    title = 'Landlord Negotiation';
                    description = 'For communication with a current/potential landlord to negotiate terms, request repairs, discuss payment arrangements, or address other tenancy issues in a formal, documented way.';
                    break;
                case 'rental-assistance':
                    title = 'Rental Assistance Application';
                    description = 'Request for financial help with rent from charities, discretionary funds, or support organizations. Details your financial situation and why you need short or long-term rental payment assistance.';
                    break;
                case 'eviction-prevention':
                    title = 'Eviction Prevention Request';
                    description = 'URGENT letter when facing imminent eviction. Requests immediate intervention to prevent homelessness and outlines what assistance you need to keep your housing (financial help, mediation with landlord, etc.).';
                    break;
                case 'utility-assistance':
                    title = 'Utility Assistance Request';
                    description = 'Request for help with essential utility bills when facing hardship. Can be directed to utility companies for payment plans or to charities/councils for financial assistance with energy, water, or other essential services.';
                    break;
                case 'social-services':
                    title = 'Social Services Appeal';
                    description = 'Appeal to local authority social services for assessment and support with housing-related needs, particularly useful for those with care needs, disabilities, mental health issues, or families with children.';
                    break;
                case 'document-replacement':
                    title = 'Document Replacement Request';
                    description = 'Request for help replacing lost or stolen identification documents (ID, birth certificate, passport) that are essential for housing applications, benefits claims, and accessing services.';
                    break;
                case 'employment-reference':
                    title = 'Employment Reference Request';
                    description = 'Request to a former employer for a reference letter that can support housing applications by confirming employment history, reliability and income information to potential landlords.';
                    break;
                case 'healthcare-access':
                    title = 'Healthcare Access Request';
                    description = 'Request for healthcare access despite housing insecurity. Helps you register with a GP without a permanent address or access specialized healthcare services when experiencing homelessness.';
                    break;
                case 'benefits-appeal':
                    title = 'Benefits Appeal Letter';
                    description = 'Formal appeal letter to challenge a decision regarding your benefits. Provides details of why the decision is incorrect and requests a review or reconsideration.';
                    break;
                case 'shelter-referral':
                    title = 'Shelter Referral Request';
                    description = 'Request for referral to a shelter or housing program. Provides details of your situation and asks for assistance in finding temporary or permanent housing.';
                    break;
                case 'domestic-violence':
                    title = 'Domestic Violence Housing Request';
                    description = 'URGENT request for housing assistance due to domestic violence. Details your situation and asks for immediate support to ensure your safety.';
                    break;
                default:
                    title = 'Template Preview';
                    description = 'Please select a letter type to see a description of the template.';
            }
            
            // Update the preview with formatted HTML
            previewElement.innerHTML = `<h4>${title}</h4><p>${description}</p>`;
        }
        
        // Generate the letter based on form input
        function generateLetter() {
            const formData = {
                fullName: document.getElementById('fullName').value.trim(),
                dob: document.getElementById('dob').value,
                address: document.getElementById('address').value.trim(),
                phone: document.getElementById('phone').value.trim(),
                email: document.getElementById('email').value.trim(),
                councilName: document.getElementById('councilName').value.trim(),
                letterType: document.getElementById('letterType').value,
                circumstances: document.getElementById('circumstances').value.trim(),
                supportingInfo: document.getElementById('supportingInfo').value.trim()
            };
            
            // Create letter content based on letter type
            let letterContent = "";
            const today = new Date().toLocaleDateString('en-GB', {
                day: '2-digit',
                month: 'long',
                year: 'numeric'
            });
            
            // Common letter header
            letterContent += `${formData.fullName}\n`;
            letterContent += `${formData.address}\n`;
            if (formData.phone) letterContent += `Tel: ${formData.phone}\n`;
            if (formData.email) letterContent += `Email: ${formData.email}\n\n`;
            
            letterContent += `${today}\n\n`;
            letterContent += `${formData.councilName}\nHousing Department\n\n`;
            
            // Letter specific content
            switch (formData.letterType) {
                case 'homeless-application':
                    letterContent += `Subject: Homeless Application - Housing Act 1996 Part VII\n\n`;
                    letterContent += `Dear Housing Officer,\n\n`;
                    letterContent += `I am writing to make a formal homelessness application under Part VII of the Housing Act 1996 (as amended).\n\n`;
                    
                    if (formData.dob) letterContent += `My date of birth is ${formatDate(formData.dob)}.\n\n`;
                    
                    letterContent += `I am currently homeless/at risk of homelessness because:\n`;
                    if (formData.circumstances) {
                        letterContent += `${formData.circumstances}\n\n`;
                    } else {
                        letterContent += `[Please add your specific circumstances here]\n\n`;
                    }
                    
                    letterContent += `Under the Homelessness Reduction Act 2017, I understand that you have a duty to assess my case and create a personalised housing plan. I request that you arrange an interview with me at your earliest convenience.\n\n`;
                    
                    if (formData.supportingInfo) {
                        letterContent += `I attach the following evidence to support my application:\n${formData.supportingInfo}\n\n`;
                    }
                    
                    letterContent += `I understand that I may be entitled to interim accommodation while you assess my case if you have reason to believe I may be homeless, eligible, and in priority need.\n\n`;
                    
                    letterContent += `Please contact me using the details above to acknowledge receipt of this application and arrange an interview.\n\n`;
                    
                    letterContent += `Yours faithfully,\n\n${formData.fullName}`;
                    break;
                    
                case 'emergency-accommodation':
                    letterContent += `Subject: URGENT REQUEST FOR EMERGENCY ACCOMMODATION\n\n`;
                    letterContent += `Dear Housing Officer,\n\n`;
                    letterContent += `I am writing to request emergency temporary accommodation as I am currently homeless with nowhere safe to stay tonight.\n\n`;
                    
                    if (formData.dob) letterContent += `My date of birth is ${formatDate(formData.dob)}.\n\n`;
                    
                    letterContent += `I need emergency accommodation because:\n`;
                    if (formData.circumstances) {
                        letterContent += `${formData.circumstances}\n\n`;
                    } else {
                        letterContent += `[Please add your specific circumstances here]\n\n`;
                    }
                    
                    letterContent += `I believe I am eligible for assistance and may be in priority need under the Housing Act 1996 (as amended by the Homelessness Reduction Act 2017).\n\n`;
                    
                    letterContent += `I understand that the council has an immediate duty to provide me with accommodation if there is reason to believe I may be homeless, eligible for assistance and in priority need.\n\n`;
                    
                    if (formData.supportingInfo) {
                        letterContent += `To support my application, I can provide the following documentation:\n${formData.supportingInfo}\n\n`;
                    }
                    
                    letterContent += `Due to the urgency of my situation, I would appreciate an immediate response. I can be contacted at any time using the contact details provided at the top of this letter.\n\n`;
                    
                    letterContent += `Yours faithfully,\n\n${formData.fullName}`;
                    break;
                
                case 'housing-assistance':
                    letterContent += `Subject: Request for Housing Assistance\n\n`;
                    letterContent += `Dear Housing Officer,\n\n`;
                    letterContent += `I am writing to request information and assistance regarding housing options available to me through your department.\n\n`;
                    
                    if (formData.dob) letterContent += `My date of birth is ${formatDate(formData.dob)}.\n\n`;
                    
                    letterContent += `My current housing situation is as follows:\n`;
                    if (formData.circumstances) {
                        letterContent += `${formData.circumstances}\n\n`;
                    } else {
                        letterContent += `[Please describe your current housing situation, any issues, and what type of help you're looking for]\n\n`;
                    }
                    
                    letterContent += `I would like to request information about the following:\n`;
                    letterContent += `- What housing support options are available for my situation\n`;
                    letterContent += `- Any financial assistance programs I might qualify for\n`;
                    letterContent += `- How to apply for social/council housing\n`;
                    letterContent += `- Any other relevant support services\n\n`;
                    
                    if (formData.supportingInfo) {
                        letterContent += `For your information, I have the following documents available:\n${formData.supportingInfo}\n\n`;
                    }
                    
                    letterContent += `I would appreciate if you could provide this information or arrange an appointment to discuss my options. I can be contacted using the details at the top of this letter.\n\n`;
                    
                    letterContent += `Thank you for your assistance.\n\n`;
                    
                    letterContent += `Yours faithfully,\n\n${formData.fullName}`;
                    break;
                    
                case 'emergency-shelter':
                    letterContent += `Subject: URGENT REQUEST FOR EMERGENCY SHELTER PLACEMENT\n\n`;
                    letterContent += `Dear Sir/Madam,\n\n`;
                    letterContent += `I am writing to request immediate emergency shelter assistance as I have nowhere safe to stay tonight.\n\n`;
                    
                    if (formData.dob) letterContent += `My date of birth is ${formatDate(formData.dob)}.\n\n`;
                    
                    letterContent += `My current situation is urgent because:\n`;
                    if (formData.circumstances) {
                        letterContent += `${formData.circumstances}\n\n`;
                    } else {
                        letterContent += `[Please explain why you need immediate shelter - where you've been staying, why you can't return there, any safety concerns, etc.]\n\n`;
                    }
                    
                    letterContent += `I am requesting placement in an emergency shelter or other temporary accommodation for tonight. I understand that space may be limited, but I have no other safe options available to me at this time.\n\n`;
                    
                    letterContent += `Any assistance you can provide would be greatly appreciated. I can be reached at any time using the contact information at the top of this letter.\n\n`;
                    
                    if (formData.supportingInfo) {
                        letterContent += `Additional information that may be relevant to my request:\n${formData.supportingInfo}\n\n`;
                    }
                    
                    letterContent += `Thank you for your urgent consideration of my request.\n\n`;
                    
                    letterContent += `Yours sincerely,\n\n${formData.fullName}`;
                    break;

                case 'reasonable-accommodation':
                    letterContent += `Subject: Reasonable Accommodation Request - Equality Act 2010\n\n`;
                    letterContent += `Dear Sir/Madam,\n\n`;
                    letterContent += `I am writing to request a reasonable accommodation under the Equality Act 2010 due to my disability.\n\n`;
                    
                    if (formData.dob) letterContent += `My date of birth is ${formatDate(formData.dob)}.\n\n`;
                    
                    letterContent += `I am requesting the following accommodation(s):\n`;
                    if (formData.circumstances) {
                        letterContent += `${formData.circumstances}\n\n`;
                    } else {
                        letterContent += `[Please describe the specific accommodation(s) you need, such as ground floor housing, accessible facilities, etc.]\n\n`;
                    }
                    
                    letterContent += `This accommodation is necessary because of my disability and would allow me to access and maintain suitable housing. The Equality Act 2010 requires housing providers to make reasonable adjustments to ensure that disabled people can use and enjoy their home on the same basis as non-disabled people.\n\n`;
                    
                    if (formData.supportingInfo) {
                        letterContent += `I have attached the following documentation to support my request:\n${formData.supportingInfo}\n\n`;
                    }
                    
                    letterContent += `I would appreciate your prompt consideration of this request. If you need any additional information or have questions, please contact me using the details provided at the top of this letter.\n\n`;
                    
                    letterContent += `Thank you for your attention to this matter.\n\n`;
                    
                    letterContent += `Yours sincerely,\n\n${formData.fullName}`;
                    break;
                    
                case 'rental-application':
                    letterContent += `Subject: Supporting Statement for Rental Application\n\n`;
                    letterContent += `Dear Landlord/Property Manager,\n\n`;
                    letterContent += `I am writing this letter to support my application for the rental property at [PROPERTY ADDRESS].\n\n`;
                    
                    if (formData.dob) letterContent += `My date of birth is ${formatDate(formData.dob)}.\n\n`;
                    
                    letterContent += `I understand that my application may raise some concerns due to my current housing situation, however I would like to provide some context:\n`;
                    if (formData.circumstances) {
                        letterContent += `${formData.circumstances}\n\n`;
                    } else {
                        letterContent += `[Explain your current housing situation, any challenges you've faced, and why you would be a reliable tenant despite these challenges]\n\n`;
                    }
                    
                    letterContent += `If given the opportunity to rent this property, I can assure you that I will:\n`;
                    letterContent += `- Pay rent on time and in full\n`;
                    letterContent += `- Maintain the property in good condition\n`;
                    letterContent += `- Abide by all terms of the tenancy agreement\n`;
                    letterContent += `- Communicate openly about any issues that arise\n\n`;
                    
                    if (formData.supportingInfo) {
                        letterContent += `To further support my application, I can provide:\n${formData.supportingInfo}\n\n`;
                    }
                    
                    letterContent += `I am committed to creating a stable housing situation for myself and would greatly value the opportunity to rent your property. I am open to discussing any additional measures that might give you confidence in me as a tenant, such as a guarantor or an increased deposit if legally permissible.\n\n`;
                    
                    letterContent += `Thank you for considering my application. I look forward to your response.\n\n`;
                    
                    letterContent += `Yours sincerely,\n\n${formData.fullName}`;
                    break;
                    
                case 'landlord-negotiation':
                    letterContent += `Subject: Request for Discussion Regarding Tenancy\n\n`;
                    letterContent += `Dear [Landlord/Property Manager's Name],\n\n`;
                    letterContent += `I am writing regarding my tenancy at ${formData.address}.\n\n`;
                    
                    if (formData.dob) letterContent += `My date of birth is ${formatDate(formData.dob)}.\n\n`;
                    
                    letterContent += `I would like to discuss the following matter regarding my tenancy:\n`;
                    if (formData.circumstances) {
                        letterContent += `${formData.circumstances}\n\n`;
                    } else {
                        letterContent += `[Detail the issue you wish to address - e.g., repairs needed, payment plan for rent arrears, extending/modifying lease terms, etc.]\n\n`;
                    }
                    
                    letterContent += `I am hoping we can find a mutually beneficial solution to this situation. I value open communication and believe we can reach an agreement that works for both parties.\n\n`;
                    
                    if (formData.supportingInfo) {
                        letterContent += `For your information, I have the following relevant documentation:\n${formData.supportingInfo}\n\n`;
                    }
                    
                    letterContent += `I would appreciate the opportunity to discuss this matter further. Please contact me at your earliest convenience using the contact details provided above.\n\n`;
                    
                    letterContent += `Thank you for your time and consideration.\n\n`;
                    
                    letterContent += `Yours sincerely,\n\n${formData.fullName}`;
                    break;
                    
                case 'rental-assistance':
                    letterContent += `Subject: Application for Rental Assistance\n\n`;
                    letterContent += `Dear Sir/Madam,\n\n`;
                    letterContent += `I am writing to apply for rental assistance as I am currently experiencing financial hardship that is impacting my ability to maintain my housing.\n\n`;
                    
                    if (formData.dob) letterContent += `My date of birth is ${formatDate(formData.dob)}.\n\n`;
                    
                    letterContent += `My current situation is as follows:\n`;
                    if (formData.circumstances) {
                        letterContent += `${formData.circumstances}\n\n`;
                    } else {
                        letterContent += `[Please explain your financial situation, why you need assistance, whether this is a temporary or ongoing need, and any steps you've taken to address the situation]\n\n`;
                    }
                    
                    letterContent += `I am requesting financial assistance with my rent payments. The details are as follows:\n`;
                    letterContent += `- Monthly rent amount: £[AMOUNT]\n`;
                    letterContent += `- Amount I am able to contribute: £[AMOUNT]\n`;
                    letterContent += `- Assistance requested: £[AMOUNT]\n`;
                    letterContent += `- Duration of assistance needed: [TIMEFRAME]\n\n`;
                    
                    if (formData.supportingInfo) {
                        letterContent += `I have attached the following documentation to support my application:\n${formData.supportingInfo}\n\n`;
                    }
                    
                    letterContent += `I understand that resources are limited, and I am committed to improving my financial situation. Any assistance you can provide would be greatly appreciated and would help me maintain stable housing while I work toward financial stability.\n\n`;
                    
                    letterContent += `Thank you for your consideration of my application. I look forward to your response.\n\n`;
                    
                    letterContent += `Yours sincerely,\n\n${formData.fullName}`;
                    break;
                    
                case 'eviction-prevention':
                    letterContent += `Subject: URGENT - Eviction Prevention Assistance\n\n`;
                    letterContent += `Dear Sir/Madam,\n\n`;
                    letterContent += `I am writing to urgently request assistance as I am facing imminent eviction from my home at ${formData.address}.\n\n`;
                    
                    if (formData.dob) letterContent += `My date of birth is ${formatDate(formData.dob)}.\n\n`;
                    
                    letterContent += `My eviction situation is as follows:\n`;
                    if (formData.circumstances) {
                        letterContent += `${formData.circumstances}\n\n`;
                    } else {
                        letterContent += `[Please provide details about your eviction: reason for eviction, stage of the eviction process, deadline to vacate, etc.]\n\n`;
                    }
                    
                    letterContent += `I am requesting urgent assistance to prevent this eviction through:\n`;
                    letterContent += `- Mediation with my landlord\n`;
                    letterContent += `- Emergency financial assistance\n`;
                    letterContent += `- Legal advice regarding my rights\n`;
                    letterContent += `- Any other available eviction prevention services\n\n`;
                    
                    if (formData.supportingInfo) {
                        letterContent += `I have attached the following relevant documentation:\n${formData.supportingInfo}\n\n`;
                    }
                    
                    letterContent += `Due to the urgent nature of my situation, I would greatly appreciate a prompt response. Without assistance, I am at imminent risk of homelessness.\n\n`;
                    
                    letterContent += `I can be reached at any time using the contact details provided at the top of this letter.\n\n`;
                    
                    letterContent += `Thank you for your urgent attention to this matter.\n\n`;
                    
                    letterContent += `Yours sincerely,\n\n${formData.fullName}`;
                    break;
                    
                case 'utility-assistance':
                    letterContent += `Subject: Request for Utility Bill Assistance\n\n`;
                    letterContent += `Dear Sir/Madam,\n\n`;
                    letterContent += `I am writing to request assistance with my utility bills as I am currently experiencing financial hardship.\n\n`;
                    
                    if (formData.dob) letterContent += `My date of birth is ${formatDate(formData.dob)}.\n\n`;
                    
                    letterContent += `I am having difficulty paying for the following utilities:\n`;
                    if (formData.circumstances) {
                        letterContent += `${formData.circumstances}\n\n`;
                    } else {
                        letterContent += `[Please specify which utilities you need help with (electricity, gas, water, etc.), the amount owed, and why you're struggling to pay]\n\n`;
                    }
                    
                    letterContent += `I am requesting assistance in the form of:\n`;
                    letterContent += `- Financial help toward outstanding bills\n`;
                    letterContent += `- Arrangement of a manageable payment plan\n`;
                    letterContent += `- Information about any available discount schemes or grants\n`;
                    letterContent += `- Assistance applying for the Warm Home Discount or similar programs\n\n`;
                    
                    if (formData.supportingInfo) {
                        letterContent += `I have attached the following documents to support my request:\n${formData.supportingInfo}\n\n`;
                    }
                    
                    letterContent += `I am committed to paying my bills, but I require temporary assistance during this difficult financial period. Any help you can provide would be greatly appreciated and would help me maintain essential services in my home.\n\n`;
                    
                    letterContent += `Thank you for your consideration of my request.\n\n`;
                    
                    letterContent += `Yours sincerely,\n\n${formData.fullName}`;
                    break;
                    
                case 'social-services':
                    letterContent += `Subject: Request for Assessment and Support from Social Services\n\n`;
                    letterContent += `Dear Social Services Department,\n\n`;
                    letterContent += `I am writing to request an assessment of my needs and appropriate support services under the Care Act 2014 and/or the Children Act 1989 (if applicable).\n\n`;
                    
                    if (formData.dob) letterContent += `My date of birth is ${formatDate(formData.dob)}.\n\n`;
                    
                    letterContent += `I am experiencing the following difficulties which I believe qualify me for support:\n`;
                    if (formData.circumstances) {
                        letterContent += `${formData.circumstances}\n\n`;
                    } else {
                        letterContent += `[Please describe your situation, any health conditions, disabilities, care needs, or family circumstances that require support]\n\n`;
                    }
                    
                    letterContent += `Specifically, I am requesting assistance with:\n`;
                    letterContent += `- Assessment of my care and support needs\n`;
                    letterContent += `- Housing support\n`;
                    letterContent += `- Access to appropriate services\n`;
                    letterContent += `- Development of a support plan\n\n`;
                    
                    if (formData.supportingInfo) {
                        letterContent += `I have the following documentation that may be relevant to my request:\n${formData.supportingInfo}\n\n`;
                    }
                    
                    letterContent += `I understand that I am entitled to an assessment of my needs regardless of my financial situation or eligibility for funded services. I would appreciate if this assessment could be arranged as soon as possible.\n\n`;
                    
                    letterContent += `Please contact me using the details provided at the top of this letter to acknowledge my request and provide information about next steps.\n\n`;
                    
                    letterContent += `Thank you for your assistance.\n\n`;
                    
                    letterContent += `Yours sincerely,\n\n${formData.fullName}`;
                    break;
                    
                case 'document-replacement':
                    letterContent += `Subject: Request for Replacement of Essential Documents\n\n`;
                    letterContent += `Dear Sir/Madam,\n\n`;
                    letterContent += `I am writing to request assistance with replacing essential identification documents that I have lost/had stolen/am unable to access.\n\n`;
                    
                    if (formData.dob) letterContent += `My date of birth is ${formatDate(formData.dob)}.\n\n`;
                    
                    letterContent += `I need assistance replacing the following document(s):\n`;
                    if (formData.circumstances) {
                        letterContent += `${formData.circumstances}\n\n`;
                    } else {
                        letterContent += `[Please specify which documents you need replaced (e.g., birth certificate, passport, driving license, etc.) and explain what happened to your original documents]\n\n`;
                    }
                    
                    letterContent += `I am currently experiencing housing insecurity/homelessness which makes it difficult for me to replace these documents because:\n`;
                    letterContent += `- I may not have a fixed address to receive mail\n`;
                    letterContent += `- I have limited financial resources to pay for replacement fees\n`;
                    letterContent += `- I may not have access to the required supporting documents\n`;
                    letterContent += `- My circumstances make it difficult to navigate complex bureaucratic processes\n\n`;
                    
                    letterContent += `These documents are essential for me to:\n`;
                    letterContent += `- Apply for housing\n`;
                    letterContent += `- Access benefits and support services\n`;
                    letterContent += `- Seek employment\n`;
                    letterContent += `- Register with healthcare providers\n\n`;
                    
                    if (formData.supportingInfo) {
                        letterContent += `I can provide the following information/documentation to support my application for replacement documents:\n${formData.supportingInfo}\n\n`;
                    }
                    
                    letterContent += `I would be grateful for any assistance you can provide, including:\n`;
                    letterContent += `- Waiving or reducing replacement fees\n`;
                    letterContent += `- Accepting alternative forms of identification\n`;
                    letterContent += `- Providing guidance on the replacement process\n`;
                    letterContent += `- Expediting my application due to my circumstances\n\n`;
                    
                    letterContent += `Thank you for your consideration. I look forward to your response.\n\n`;
                    
                    letterContent += `Yours sincerely,\n\n${formData.fullName}`;
                    break;
                    
                case 'employment-reference':
                    letterContent += `Subject: Request for Employment Reference\n\n`;
                    letterContent += `Dear [Former Employer],\n\n`;
                    letterContent += `I hope this letter finds you well. I am writing to request an employment reference from you, as I am currently applying for housing and need to demonstrate my employment history and reliability to potential landlords.\n\n`;
                    
                    if (formData.dob) letterContent += `My date of birth is ${formatDate(formData.dob)}.\n\n`;
                    
                    letterContent += `I worked at [Company Name] from [Start Date] to [End Date] as a [Position].\n\n`;
                    
                    if (formData.circumstances) {
                        letterContent += `Additional context regarding my request:\n${formData.circumstances}\n\n`;
                    }
                    
                    letterContent += `If possible, I would appreciate if your reference could confirm:\n`;
                    letterContent += `- The dates of my employment\n`;
                    letterContent += `- My job title and responsibilities\n`;
                    letterContent += `- My reliability and punctuality\n`;
                    letterContent += `- My salary (if you are able to disclose this)\n\n`;
                    
                    letterContent += `This reference will greatly support my housing application and help me secure stable accommodation. I would be grateful if you could provide this reference letter at your earliest convenience.\n\n`;
                    
                    if (formData.supportingInfo) {
                        letterContent += `I have the following additional information that may help you prepare the reference:\n${formData.supportingInfo}\n\n`;
                    }
                    
                    letterContent += `The reference can be addressed "To Whom It May Concern" and sent to me using the contact details at the top of this letter, or directly to the landlord/agency if I provide their details separately.\n\n`;
                    
                    letterContent += `Thank you for your assistance with this matter.\n\n`;
                    
                    letterContent += `Yours sincerely,\n\n${formData.fullName}`;
                    break;
                    
                case 'healthcare-access':
                    letterContent += `Subject: Request for Healthcare Access Without Fixed Address\n\n`;
                    letterContent += `Dear Practice Manager,\n\n`;
                    letterContent += `I am writing to request registration with your GP practice despite not having a fixed address.\n\n`;
                    
                    if (formData.dob) letterContent += `My date of birth is ${formatDate(formData.dob)}.\n\n`;
                    
                    letterContent += `My current situation regarding accommodation is as follows:\n`;
                    if (formData.circumstances) {
                        letterContent += `${formData.circumstances}\n\n`;
                    } else {
                        letterContent += `[Please explain your housing situation - whether you're rough sleeping, staying in temporary accommodation, sofa surfing, etc.]\n\n`;
                    }
                    
                    letterContent += `I am aware that NHS guidelines state that GP practices should not refuse to register patients on the grounds that they are homeless, do not have proof of address, or identification. The NHS Constitution states that primary medical services must be provided to anyone who is living in the UK lawfully or who is registered with the practice, regardless of housing status.\n\n`;
                    
                    letterContent += `I need access to healthcare services for the following reasons:\n`;
                    letterContent += `- To manage existing health conditions\n`;
                    letterContent += `- To access preventative healthcare\n`;
                    letterContent += `- To ensure continuity of care\n`;
                    letterContent += `- To access referrals to specialist services if needed\n\n`;
                    
                    if (formData.supportingInfo) {
                        letterContent += `I can provide the following information/documentation:\n${formData.supportingInfo}\n\n`;
                    }
                    
                    letterContent += `For correspondence purposes, I can be contacted using the phone number and/or email address provided at the top of this letter. Alternatively, I am happy to collect any correspondence directly from the practice.\n\n`;
                    
                    letterContent += `I would appreciate your assistance in registering me with your practice so that I can access the healthcare I need. If there are any specific forms or procedures I need to complete, please let me know.\n\n`;
                    
                    letterContent += `Thank you for your consideration of my request.\n\n`;
                    
                    letterContent += `Yours sincerely,\n\n${formData.fullName}`;
                    break;
                    
                case 'benefits-appeal':
                    letterContent += `Subject: Appeal Against Benefit Decision - [Reference Number if available]\n\n`;
                    letterContent += `Dear Sir/Madam,\n\n`;
                    letterContent += `I am writing to formally appeal against the decision made regarding my benefit claim.\n\n`;
                    
                    if (formData.dob) letterContent += `My date of birth is ${formatDate(formData.dob)}.\n\n`;
                    
                    letterContent += `Details of the decision I am appealing:\n`;
                    letterContent += `- Benefit type: [e.g., Universal Credit, Housing Benefit, etc.]\n`;
                    letterContent += `- Date of decision: [Date]\n`;
                    letterContent += `- Reference number: [If available]\n\n`;
                    
                    letterContent += `I believe this decision is incorrect for the following reasons:\n`;
                    if (formData.circumstances) {
                        letterContent += `${formData.circumstances}\n\n`;
                    } else {
                        letterContent += `[Please explain in detail why you think the decision is wrong, referring to specific points in the decision letter if possible]\n\n`;
                    }
                    
                    letterContent += `My current circumstances are as follows:\n`;
                    letterContent += `- I am currently [homeless/at risk of homelessness/in temporary accommodation]\n`;
                    letterContent += `- This benefit is essential for me to [secure/maintain] housing\n`;
                    letterContent += `- Without this benefit, I face severe hardship including potential homelessness\n\n`;
                    
                    if (formData.supportingInfo) {
                        letterContent += `I have attached the following evidence to support my appeal:\n${formData.supportingInfo}\n\n`;
                    }
                    
                    letterContent += `I request that you reconsider this decision as a matter of urgency due to my housing situation. If necessary, I would like my case to be passed to an independent tribunal for review.\n\n`;
                    
                    letterContent += `Please acknowledge receipt of this appeal and inform me of the next steps in the process. I can be contacted using the details provided at the top of this letter.\n\n`;
                    
                    letterContent += `Yours faithfully,\n\n${formData.fullName}`;
                    break;
                    
                case 'shelter-referral':
                    letterContent += `Subject: Request for Shelter Referral\n\n`;
                    letterContent += `Dear Sir/Madam,\n\n`;
                    letterContent += `I am writing to request a referral to a shelter or supported housing service as I am currently experiencing homelessness/at imminent risk of homelessness.\n\n`;
                    
                    if (formData.dob) letterContent += `My date of birth is ${formatDate(formData.dob)}.\n\n`;
                    
                    letterContent += `My current situation is as follows:\n`;
                    if (formData.circumstances) {
                        letterContent += `${formData.circumstances}\n\n`;
                    } else {
                        letterContent += `[Please describe your housing situation in detail - where you're currently staying, why you need shelter, how long you've been homeless or when you expect to become homeless]\n\n`;
                    }
                    
                    letterContent += `I am looking for the following type of accommodation/support:\n`;
                    letterContent += `- Emergency shelter/Temporary accommodation\n`;
                    letterContent += `- Longer-term supported housing\n`;
                    letterContent += `- Specialist accommodation for those with [specific needs if applicable]\n`;
                    letterContent += `- Access to housing support services\n\n`;
                    
                    if (formData.supportingInfo) {
                        letterContent += `Additional information that may be relevant to my referral:\n${formData.supportingInfo}\n\n`;
                    }
                    
                    letterContent += `I understand that shelter spaces are limited, but I would greatly appreciate your assistance in finding appropriate accommodation for my situation. I am willing to engage with any assessment processes or support services that are required.\n\n`;
                    
                    letterContent += `Please contact me using the details provided at the top of this letter regarding any available placements or to arrange an assessment. Due to my housing situation, the best way to reach me is by [phone/email/through a third party contact].\n\n`;
                    
                    letterContent += `Thank you for your assistance.\n\n`;
                    
                    letterContent += `Yours sincerely,\n\n${formData.fullName}`;
                    break;
                    
                case 'domestic-violence':
                    letterContent += `Subject: URGENT - Housing Request Due to Domestic Violence\n\n`;
                    letterContent += `Dear Housing Officer,\n\n`;
                    letterContent += `I am writing to request urgent housing assistance as I am fleeing domestic violence and require immediate safe accommodation.\n\n`;
                    
                    if (formData.dob) letterContent += `My date of birth is ${formatDate(formData.dob)}.\n\n`;
                    
                    letterContent += `My current situation is as follows:\n`;
                    if (formData.circumstances) {
                        letterContent += `${formData.circumstances}\n\n`;
                    } else {
                        letterContent += `[Please provide brief details about your situation - you don't need to include full details of the abuse if you don't feel comfortable doing so]\n\n`;
                    }
                    
                    letterContent += `Due to the domestic violence I have experienced, I believe I am in priority need for housing under the Housing Act 1996 (as amended). I understand that the local authority has a duty to provide emergency accommodation to people fleeing domestic abuse who are homeless and in priority need.\n\n`;
                    
                    letterContent += `My safety is at immediate risk, and I need:\n`;
                    letterContent += `- Safe emergency accommodation away from my abuser\n`;
                    letterContent += `- A confidential assessment of my housing needs\n`;
                    letterContent += `- Information about specialist domestic abuse support services\n\n`;
                    
                    if (formData.supportingInfo) {
                        letterContent += `I have the following supporting information/documentation:\n${formData.supportingInfo}\n\n`;
                    }
                    
                    letterContent += `For safety reasons, please contact me using the method I have indicated as safe at the top of this letter. If you need to leave a message, please do not mention domestic abuse or my specific circumstances.\n\n`;
                    
                    letterContent += `I request that my information be kept strictly confidential due to the risk to my safety.\n\n`;
                    
                    letterContent += `Thank you for your urgent assistance with this matter.\n\n`;
                    
                    letterContent += `Yours sincerely,\n\n${formData.fullName}`;
                    break;

                default:
                    letterContent += `Subject: Housing Assistance Request\n\n`;
                    letterContent += `Dear Sir/Madam,\n\n`;
                    letterContent += `I am writing regarding my housing situation. I am currently experiencing housing difficulties and would appreciate your assistance.\n\n`;
                    
                    if (formData.dob) letterContent += `My date of birth is ${formatDate(formData.dob)}.\n\n`;
                    
                    if (formData.circumstances) {
                        letterContent += `My current circumstances are as follows:\n${formData.circumstances}\n\n`;
                    }
                    
                    if (formData.supportingInfo) {
                        letterContent += `I have the following supporting information:\n${formData.supportingInfo}\n\n`;
                    }
                    
                    letterContent += `I would appreciate your guidance and assistance regarding my situation. Please contact me using the details above at your earliest convenience.\n\n`;
                    
                    letterContent += `Yours faithfully,\n\n${formData.fullName}`;
            }
            
            // Update the letter output area
            const letterOutput = document.getElementById('letterOutput');
            letterOutput.textContent = letterContent;
            letterOutput.classList.add('typing-animation');
            
            // Enable the buttons
            document.getElementById('copyButton').disabled = false;
            document.getElementById('printButton').disabled = false;
            document.getElementById('downloadButton').disabled = false;
            document.getElementById('saveLetterBtn').disabled = false;
            
            // Show success message
            showMessage("Letter generated successfully", "success");
            
            // Remove animation class after animation completes
            setTimeout(() => {
                letterOutput.classList.remove('typing-animation');
            }, 1500);
        }
        
        // Format date in UK format
        function formatDate(dateString) {
            if (!dateString) return '';
            
            const date = new Date(dateString);
            return date.toLocaleDateString('en-GB', {
                day: '2-digit',
                month: 'long',
                year: 'numeric'
            });
        }
        
        // Copy generated letter to clipboard
        function copyToClipboard() {
            const letterOutput = document.getElementById('letterOutput');
            const content = letterOutput.textContent;
            
            if (!content || content === 'Your letter will appear here after you submit the form.') {
                showMessage("No letter to copy", "error");
                return;
            }
            
            navigator.clipboard.writeText(content)
                .then(() => {
                    showMessage("Letter copied to clipboard", "success");
                })
                .catch(err => {
                    console.error('Failed to copy: ', err);
                    showMessage("Failed to copy letter", "error");
                });
        }
        
        // Print the generated letter
        function printLetter() {
            const letterOutput = document.getElementById('letterOutput');
            const content = letterOutput.textContent;
            
            if (!content || content === 'Your letter will appear here after you submit the form.') {
                showMessage("No letter to print", "error");
                return;
            }
            
            // Create a new window for printing
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                <head>
                    <title>Print Letter</title>
                    <style>
                        body {
                            font-family: Arial, sans-serif;
                            line-height: 1.5;
                            margin: 2cm;
                            white-space: pre-wrap;
                        }
                    </style>
                </head>
                <body>
                    ${content.replace(/\n/g, '<br>')}
                </body>
                </html>
            `);
            
            printWindow.document.close();
            printWindow.focus();
            
            // Print after a slight delay to ensure content is loaded
            setTimeout(() => {
                printWindow.print();
                printWindow.close();
            }, 500);
        }
        
        // Download letter as PDF (mock implementation - would require PDF library)
        function downloadAsPDF() {
            showMessage("PDF download feature coming soon. Please use print function and save as PDF.", "info");
        }
        
        // Save letter to a text file
        function saveLetterToFile() {
            const letterOutput = document.getElementById('letterOutput');
            const content = letterOutput.textContent;
            
            if (!content || content === 'Your letter will appear here after you submit the form.') {
                showMessage("No letter to save", "error");
                return;
            }
            
            // Get letter type and user name for the filename
            const letterType = document.getElementById('letterType').value || 'letter';
            const fullName = document.getElementById('fullName').value.trim().replace(/\s+/g, '-');
            
            // Create a date string for the filename
            const dateStr = new Date().toISOString().slice(0, 10);
            
            // Create filename
            const filename = `${letterType}-${fullName}-${dateStr}.txt`;
            
            // Create a blob with the content
            const blob = new Blob([content], { type: 'text/plain' });
            
            // Create a link element and trigger download
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = filename;
            
            // Append to document, click, and remove
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // Show success message
            showMessage("Letter saved successfully", "success");
        }
        
        // Show message to user
        function showMessage(message, type) {
            const messageBox = document.getElementById('messageBox');
            const messageText = document.getElementById('messageText');
            
            messageBox.className = `message-box ${type} visible`;
            messageText.textContent = message;
            
            // Hide message after 3 seconds
            setTimeout(() => {
                messageBox.classList.remove('visible');
            }, 3000);
        }
    </script>
</body>
</html>
